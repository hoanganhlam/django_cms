{"head":{"title":"Enzyme","category":"React","layout":"2017/sheet","updated":"2020-02-12T00:00:00.000Z","tags":["Featured"],"weight":-1,"keywords":["shallow()","mount()","wrap.setProps()","wrap.find().simulate('click')","wrap.contains(<div/>)"]},"body":[{"title":"Introduction","elms":"{: .-intro}\n\n[Enzyme](http://airbnb.io/enzyme) lets you write unit tests for React components. This guide covers Enzyme 3.x.\n\n- [Enzyme website](https://enzymejs.github.io/enzyme/) _(enzymejs.github.io)_\n","h2":"Getting started"},{"title":"Mounting","elms":"{: .-prime}\n\n```js\nimport {shallow, mount} from 'cs/enzyme'\n```\n{: .-setup}\n\n```js\nwrap = shallow(<MyComponent />)\n```\n\n```js\nwrap = mount(<MyComponent />)\n```\n\nShallow wrapping doesn't descend down to sub-components.\nA full mount also mounts sub-components.\n\nSee: [Shallow rendering](http://airbnb.io/enzyme/docs/api/shallow.html),\n[Full rendering](http://airbnb.io/enzyme/docs/api/mount.html)\n","h2":"Getting started"},{"title":"Debugging","elms":"\n```js\nconsole.log(wrap.debug())\n```\n\nShows HTML for debugging purposes.\n\nSee: [debug()](http://airbnb.io/enzyme/docs/api/ReactWrapper/debug.html)\n","h2":"Getting started"},{"title":null,"elms":"{: .-three-column}\n","h2":"Examples"},{"title":"Basic example","elms":"{: .-prime}\n\n```js\nimport { shallow } from 'enzyme'\nimport MyComponent from '../MyComponent'\n```\n{: .-setup}\n\n```js\nit('works', () => {\n  const wrap = shallow(\n    <MyComponent name='Groot' />\n  )\n\n  expect(wrap.text()).toEqual('I am Groot')\n})\n```\n","h2":"Examples"},{"title":"Props and state","elms":"\n#### Setting\n\n```js\nwrap.setProps({ name: 'Moe' })\nwrap.setState({ show: true })\n```\n\n#### Asserting\n\n```js\nexpect(wrap.prop('name')).toEqual('Moe')\nexpect(wrap.state('show')).toEqual(true)\n```\n\n```js\nexpect('name' in wrap.props()).toEqual('Moe')\nexpect('show' in wrap.state()).toEqual(true)\n```\n","h2":"Examples"},{"title":"Matching elements","elms":"\n```js\nexpect(\n  wrap.containsMatchingElement(\n    <span>I am groot</span>\n  )\n).toBeTruthy()\n```\n\n`containsMatchingElement()` is probably the most useful assertion in Jest.\n","h2":"Examples"},{"title":"Snapshots","elms":"\n```js\nexpect(wrap).toMatchSnapshot()\n```\n\nBe sure you've set up enzyme-to-json for snapshots (see [Installing](#installing) below).\n","h2":"Examples"},{"title":"Traversions","elms":"\n```js\nexpect(\n  wrap.find('button').text()\n).toEqual('Submit')\n```\n\nUse `.find()` to traverse down to nodes. It will return wrapper objects, too.\n","h2":"Examples"},{"title":"Simulating events","elms":"\n```js\nwrap.find('input').simulate('click')\n```\n\n#### With event object props\n\n```js\nwrap.find('input').simulate('change', {\n  target: { value: 'hello' }\n})\n```\n","h2":"Examples"},{"title":"Initial setup","elms":"\n```\nnpm install --save-dev enzyme \\\n  enzyme-adapter-react-16 \\\n  react-test-renderer\n```\n{: .-setup}\n\n#### test/setup.js\n\n```js\nimport Enzyme from 'enzyme'\nimport Adapter from 'enzyme-adapter-react-16'\n\nEnzyme.configure({ adapter: new Adapter() })\n```\n\n#### package.json\n\n```js\n\"jest\": {\n  \"setupFiles\": [\n    \"test/setup.js\"\n  ]\n}\n```\n\nThis configures Enzyme for React v16, and Jest to automatically configure Enzyme for you. There are other adapters in Enzyme's installation instructions.\n\nSee: [Installation](http://airbnb.io/enzyme/#installation)\n","h2":"Installing"},{"title":"Jest snapshots","elms":"\n```\nnpm install --save-dev enzyme-to-json\n```\n{: .-setup}\n\n#### package.json\n\n```js\n\"jest\": {\n  \"snapshotSerializers\": [\n    \"enzyme-to-json/serializer\"\n  ]\n}\n```\n\n#### Test\n\n```js\nit('works', () => {\n  wrap = mount(<MyComponent />)\n  expect(wrap).toMatchSnapshot()\n})\n```\n\nOptional, but recommended: This allows you to use Enzyme wrappers with Jest snapshots.\n\nSee: [enzyme-to-json](https://www.npmjs.com/package/enzyme-to-json)\n","h2":"Installing"},{"title":"Traversing","elms":"\n```js\nwrap.find('button')   // → ReactWrapper\nwrap.filter('button') // → ReactWrapper\nwrap.not('span')      // → ReactWrapper (inverse of filter())\nwrap.children()       // → ReactWrapper\nwrap.parent()         // → ReactWrapper\nwrap.closest('div')   // → ReactWrapper\nwrap.childAt(0)       // → ReactWrapper\nwrap.at(0)            // → ReactWrapper\nwrap.first()          // → ReactWrapper\nwrap.last()           // → ReactWrapper\n```\n\n```js\nwrap.get(0)           // → ReactElement\nwrap.getElement()     // → ReactElement\nwrap.getElements()    // → Array<ReactElement>\nwrap.getDOMNode()     // → DOMComponent\n```\n\nSee: [Full rendering API](http://airbnb.io/enzyme/docs/api/mount.html)\n","h2":"ReactWrapper"},{"title":"Actions","elms":"\n```js\nwrap.simulate('click')\n```\n","h2":"ReactWrapper"},{"title":"React components","elms":"\n```js\nwrap.setState({ ··· })\nwrap.setProps({ ··· })\nwrap.setContext({ ··· })\n```\n\n```js\nwrap.state()         // get full state\nwrap.props()         // get full props\nwrap.context()       // get full context\n```\n\n```js\nwrap.state('key')    // → any\nwrap.prop('key')     // → any\nwrap.context('key')  // → any\n```\n\n```js\nwrap.instance()      // → ReactComponent\n```\n","h2":"ReactWrapper"},{"title":"Mount","elms":"\n```js\nwrap.mount()\nwrap.unmount()\nwrap.update()      // calls forceUpdate()\n```\n","h2":"ReactWrapper"},{"title":"Tests","elms":"\n```js\nwrap.debug()               // → string\nwrap.html()                // → string\nwrap.text()                // → string\nwrap.type()                // → string | function\nwrap.name()                // → string\nwrap.is('.classname')      // → boolean\nwrap.hasClass('class')     // → boolean\nwrap.exists()              // → boolean\nwrap.contains(<div />)     // → boolean\nwrap.contains([ <div /> ]) // → boolean\nwrap.some('.child')        // → boolean\n\nwrap.someWhere(n => n.hasClass('foo'))\n\nwrap.containsMatchingElement(<div />)         // → boolean\nwrap.containsAllMatchingElements([ <div /> ]) // → boolean\nwrap.containsAnyMatchingElements([ <div /> ]) // → boolean\n```\n","h2":"ReactWrapper"},{"title":null,"elms":"\n- [Enzyme website](https://airbnb.io/enzyme) _(airbnb.io)_\n- [Enzyme v2 cheatsheet](./enzyme@2) _(devhints.io)_ (old version)","h2":"References"}]}