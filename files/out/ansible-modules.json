{"head":{"title":"Ansible modules","category":"Ansible","layout":"2017/sheet","prism_languages":["yaml"],"updated":"2017-10-03T00:00:00.000Z"},"body":[{"title":"Basic file","elms":"\n```yaml\n---\n- hosts: production\n  remote_user: root\n  tasks:\n  - ···\n```\n\nPlace your modules inside `tasks`.\n","h2":"Format"},{"title":"Task formats","elms":"\n#### One-line\n\n```yaml\n- apt: pkg=vim state=present\n```\n\n#### Map\n\n```yaml\n- apt:\n    pkg: vim\n    state: present\n```\n\n#### Foldable scalar\n\n```yaml\n- apt: >\n    pkg=vim\n    state=present\n```\n\nDefine your tasks in any of these formats. One-line format is preferred for short declarations, while maps are preferred for longer.\n","h2":"Format"},{"title":"Aptitude","elms":"\n#### Packages\n\n```yaml\n- apt:\n    pkg: nodejs\n    state: present # absent | latest\n    update_cache: yes\n    force: no\n```\n\n#### Deb files\n\n```yaml\n- apt:\n    deb: \"https://packages.erlang-solutions.com/erlang-solutions_1.0_all.deb\"\n```\n\n#### Repositories\n\n```yaml\n- apt_repository:\n    repo: \"deb https://··· raring main\"\n    state: present\n```\n\n#### Repository keys\n\n```yaml\n- apt_key:\n    id: AC40B2F7\n    url: \"http://···\"\n    state: present\n```\n","h2":"Modules"},{"title":"git","elms":"\n```yaml\n- git:\n    repo: git://github.com/\n    dest: /srv/checkout\n    version: master\n    depth: 10\n    bare: yes\n```\n\nSee: [git module](http://devdocs.io/ansible/git_module)\n","h2":"Modules"},{"title":"git_config","elms":"\n```yaml\n- git_config:\n    name: user.email\n    scope: global # local | system\n    value: hi@example.com\n```\n\nSee: [git_config module](http://devdocs.io/ansible/git_config_module)\n","h2":"Modules"},{"title":"user","elms":"\n```yaml\n- user:\n    state: present\n    name: git\n    system: yes\n    shell: /bin/sh\n    groups: admin\n    comment: \"Git Version Control\"\n```\n\nSee: [user module](http://devdocs.io/ansible/user_module)\n","h2":"Modules"},{"title":"service","elms":"\n```yaml\n- service:\n    name: nginx\n    state: started\n    enabled: yes     # optional\n```\n\nSee: [service module](http://devdocs.io/ansible/service_module)\n","h2":"Modules"},{"title":"shell","elms":"\n```yaml\n- shell: apt-get install nginx -y\n```\n\n#### Extra options\n\n```yaml\n- shell: echo hello\n  args:\n    creates: /path/file  # skip if this exists\n    removes: /path/file  # skip if this is missing\n    chdir: /path         # cd here before running\n```\n\n#### Multiline example\n\n```yaml\n- shell: |\n    echo \"hello there\"\n    echo \"multiple lines\"\n```\n\nSee: [shell module](http://devdocs.io/ansible/shell_module)\n","h2":"Shell"},{"title":"script","elms":"\n```yaml\n- script: /x/y/script.sh\n  args:\n    creates: /path/file  # skip if this exists\n    removes: /path/file  # skip if this is missing\n    chdir: /path         # cd here before running\n```\n\nSee: [script module](http://devdocs.io/ansible/script_module)\n","h2":"Shell"},{"title":"file","elms":"\n```yaml\n- file:\n    path: /etc/dir\n    state: directory # file | link | hard | touch | absent\n\n    # Optional:\n    owner: bin\n    group: wheel\n    mode: 0644\n    recurse: yes  # mkdir -p\n    force: yes    # ln -nfs\n```\n\nSee: [file module](http://devdocs.io/ansible/file_module)\n","h2":"Files"},{"title":"copy","elms":"\n```yaml\n- copy:\n    src: /app/config/nginx.conf\n    dest: /etc/nginx/nginx.conf\n\n    # Optional:\n    owner: user\n    group: user\n    mode: 0644\n    backup: yes\n```\n\nSee: [copy module](http://devdocs.io/ansible/copy_module)\n","h2":"Files"},{"title":"template","elms":"\n```yaml\n- template:\n    src: config/redis.j2\n    dest: /etc/redis.conf\n\n    # Optional:\n    owner: user\n    group: user\n    mode: 0644\n    backup: yes\n```\n\nSee: [template module](http://devdocs.io/ansible/template_module)\n","h2":"Files"},{"title":"local_action","elms":"\n```yaml\n- name: do something locally\n  local_action: shell echo hello\n```\n","h2":"Local actions"},{"title":"debug","elms":"\n```yaml\n- debug:\n    msg: \"Hello {{ var }}\"\n```\n\nSee: [debug module](http://devdocs.io/ansible/debug_module)\n{% endraw %}\n","h2":"Local actions"}]}