{"head":{"title":"Flynn","category":"Devops","layout":"2017/sheet"},"body":[{"title":"General workflow","elms":"\n* Start a flynn cluster (on amazon or vagrant)\n* `flynn cluster add` to add that cluster\n* `flynn create NAME` in your app\n* `git push flynn master` to deploy\n","h2":null},{"title":"Creating a cluster (AWS)","elms":"\n```bash\nflynn install  # (provisions AWS EC2 stuff)\nflynn key add  # (adds your pubkey to AWS)\n```\n\n#### What it does\n\n* This creates `XXXX.flynnhub.com`\n* Dashboard in `dashboard.XXXX.flynnhub.com`\n* Use `flynn -a dashboard env get LOGIN_TOKEN` to get login token\n* Apps live in `APP.XXXX.flynnhub.com`\n","h2":null},{"title":"Using a flynn cluster","elms":"\nManaged in `~/.flynnrc`:\n{: .-setup}\n\n```bash\nflynn cluster\nflynn cluster add [-g githost] [-p pin] NAME URL KEY\nflynn cluster remove NAME\nflynn cluster default NAME # use this current\n```\n","h2":null},{"title":"Setting up a new app","elms":"\n```bash\ncd ~/project\nflynn create example # adds the `flynn` remote\nflynn route # prints http routes\ngit push flynn master\n```\n","h2":null},{"title":"Environment vars","elms":"\n```bash\nflynn env\nflynn env set FOO=bar BAZ=foobar\nflynn env unset FOO\n```\n","h2":"Commands"},{"title":"Scale","elms":"\n```bash\nflynn ps\nflynn scale web=3\n```\n","h2":"Commands"},{"title":"Logs","elms":"\n```bash\nflynn log\nflynn log flynn-d55c7a...\n```\n","h2":"Commands"},{"title":"Running commands","elms":"\n```bash\nflynn run rake db:migrate\n```\n","h2":"Commands"},{"title":"Manage routes","elms":"\n```bash\nflynn route\nflynn route add http example.com\n# then make a CNAME from example.com to myapp.xxxx.flynnhub.com\n```\n","h2":"Commands"},{"title":"More","elms":"\n```bash\nflynn ps\nflynn kill <job>\n\nflynn meta\nflynn meta set foo=baz\n```\n","h2":"Commands"},{"title":null,"elms":"\n- [Flynn website](https://flynn.io/) _(flynn.io)_","h2":"Also see"}]}