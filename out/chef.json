{"head":{"title":"Chef","category":"Devops","layout":"2017/sheet"},"body":[{"title":"Install","elms":"\nIn your server:\n{: .-setup}\n\n```bash\n$ sudo apt-get install curl\n```\n\n```bash\n$ curl -L https://omnitruck.chef.io/install.sh | sudo bash\nThank you for installing Chef!\n```\n\n```bash\n$ chef-solo -v\n...\nChef: 14.5.33\n```\n","h2":null},{"title":"Start the cookbook","elms":"\n```bash\n wget http://github.com/chef-cookbooks/chef-repo/tarball/master -O - | tar xzf - --strip-components=1\n```\n","h2":null},{"title":"Knife","elms":"\n```bash\n$ knife supermarket download mysql\n```\n","h2":null},{"title":"Invoking chef-solo","elms":"\n```bash\n$ chef-solo -c solo.rb -j web.json\n```\n","h2":null},{"title":"Simple compile-from-source","elms":"\n```ruby\nexecute \"tar --no-same-owner -zxf hi.tar.gz\" do\n  cwd \"/usr/local/src\"\n  creates \"/usr/local/src/node-v#{version}\"\nend\n```\n\n```ruby\nbash \"compile\" do\n  cwd \"/usr/local/src/node-v#{version}\"\n  code %[\n    PATH=/usr/local/bin:$PATH\n    ./configure\n    make\n  ]\n  creates \"/usr/local/src/node-v#{version}/node\"\nend\n```\n","h2":"Examples"},{"title":"remote file","elms":"\n```ruby\nremote_file \"/usr/local/src/hi.tar.gz\" do\n  source \"http://...\"\n  checksum \"ab83be...\"\n  mode 0644\n  action :create_if_missing\nend\n```\n","h2":"Examples"},{"title":"ruby_block","elms":"\n```ruby\nruby_block \"name\" do\n  block { File.read ... }\n  not_if { File.exists?(...) }\nend\n```\n","h2":"Examples"},{"title":"Execute","elms":"\n```ruby\nexecute \"name\" do\n  cwd \"...\"\n  environment({ \"PATH\" => \"...\" })\n  command \"make install\"\n  creates \"...\"\nend\n```\n","h2":"Examples"},{"title":"Conditions","elms":"\n```ruby\n  creates \"/usr/local/src/node-v#{version}/node\"\n  not_if { File.exists?('...') }\n```\n","h2":"Examples"},{"title":null,"elms":"\n* [Learn Chef Rally](https://learn.chef.io) _(learn.chef.io)_\n* [install_from_source.rb recipe](https://github.com/mdxp/nodejs-cookbook/blob/master/recipes/install_from_source.rb) _(github.com)_","h2":"Also see"}]}