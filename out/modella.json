{"head":{"title":"Modella","category":"JavaScript libraries","layout":"2017/sheet","prism_languages":["coffeescript"],"intro":"[Modella](https://www.npmjs.com/package/modella) allows you to create simple models in JavaScript. This is a guide on basic usage of Modella in CoffeeScript.\n"},"body":[{"title":"Defining models","elms":"\n```coffeescript\nUser = Modella('User')\n```\n\n```coffeescript\n  .attr('name')\n  .attr('email', { required: true })\n  .use(require('modella-validators'))\n```\n\n```coffeescript\n  .validator (u) ->\n    u.error('username', 'is required')  unless u.has('username')\n```\n","h2":null},{"title":"Instances","elms":"\n```coffeescript\nuser\n  .name()\n  .name('John')\n  .set(name: 'John')\n```\n\n```coffeescript\n  .has('name')   # â†’ true\n  .isNew()\n  .isValid()\n```\n\n```coffeescript\n  .save (err) ->\n  .remove (err) ->\n  .removed\n  .model         # === User\n```\n","h2":null},{"title":"Emitting","elms":"\n```coffeescript\nModel.emit('event', [data...])\n```\n\n```coffeescript\nrecord.emit('event', [data...])\n```\n","h2":"Events"},{"title":"List of events","elms":"\n```coffeescript\nuser\n  .on 'save', ->\n  .on 'create', ->\n  .on 'saving', (data, done) -> done()\n```\n\n```coffeescript\n  .on 'remove', ->\n  .on 'removing', (data, done) -> done()\n```\n\n```coffeescript\n  .on 'valid', ->\n  .on 'invalid', ->\n```\n\n```coffeescript\n  .on 'change', ->\n  .on 'change email', ->\n```\n\n```coffeescript\n  .on 'initializing', (instance, attrs) ->\n  .on 'initialize', ->\n```\n\n```coffeescript\n  .on 'error', -> failed to save model\n```\n\n```coffeescript\n  .on 'setting', (instance, attrs) ->  # on Model#set()\n  .on 'attr', -> # new attr via Model.attr()\n```\n","h2":"Events"},{"title":"Plugins","elms":"\n```coffeescript\nMyPlugin = ->\n  return (Model) ->\n\n    Model.method = ...\n    Model.prototype.method = ...\n    Model.attr(...)\n\n    Model\n```\n\nA plugin is a function that returns a model decorator (ie, a function that takes in a model and returns a model).\n","h2":"Misc"},{"title":"Memory","elms":"\n```coffeescript\nUser\n  .all (err, users) ->\n  .find id, (err, user) ->\n```\n\n```coffeescript\n  .remove ->\n  .save ->\n  .update ->\n```","h2":"Misc"}]}